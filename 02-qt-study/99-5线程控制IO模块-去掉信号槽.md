# MMJK程序说明    

## 1 前言   
该项目是某等效设备的模拟，主要通过USB-5830的IO模块去控制灯光的效果。这个只是一个设备测试的程序，通过数据输入控制数据输出的效果。     

## 2 运行平台   
- 操作系统：Win10，Ubuntu16.04   
- 开发环境：qtcreator    
- 开发库：Qt5，USB5830的函数库   
- 涉及技术点：多线程，IO控制，界面设计等   

## 3 软件功能   
1. 该IO模块设计5通道的数据输出和5通道的数据输入  
2. 当第i个端口有数据输入时，对应的第i个数据的输出信号，灯光点亮       

## 4 软件实现   
1. 包含三个类，作用如下：
	- IO的控制类`IOCtrl`：通过这个类来初始化设备，建立设备的IO对象，同时启动线程，销毁IO对象   
	- 数据输出端口线程类`DOThr`：对应一个数据输出的端口 (这个没有用)   
	- 数据输入端口线程类`DIThr`：对应一个数据输入的端口和一个输出端口    
2. 一共包括32个数据IO端口，一个有32个子线程，在win10系统可以顺利运行，但是Ubuntu系统运行不起来，不支持那么多的线程，但是如果用5个线程的话，不通过信号槽，而是将Ubuntu勉强支持        
3. 当第i个输入端口收到输入信号，那么通过向主线程发信号，进而调用槽函数，修改第i个输出端口的灯光状态    

## 5 遇到问题及思考    
1. 多线程编程时，线程的个数受到硬件的影响，最好不要开太多的线程   
2. 再将一个普通的类改写成可以添加信号槽的类时，改完现有的参数时，还要关闭QTcreator，删除原来编译好的文件，重新编译才能通过   
3. 在多线程中，若使用信号槽，那么需要注意信号槽的第5个参数的写法    